---
import { parseText } from '@/utils/textParser';
import ProjectLayout from '@layouts/ProjectLayout.astro';
import { Icon } from 'astro-icon/components';
import { Image } from 'astro:assets';
import { getCollection, getEntry, render } from 'astro:content';

const pt = (text: string) => parseText(text);

// Obtener el slug de la URL
const { slug } = Astro.params;

// Encontrar el proyecto por slug
const project = await getEntry('projects', slug as string);

// Si no existe el proyecto, mostrar 404
if (!project) {
  return Astro.redirect('/404');
}

// Get all projects and filter manually
const allProjects = await getCollection('projects');
const relatedProjects = allProjects
  .filter((p) => p.data.category === project.data.category && p.data.slug !== project.data.slug)
  .slice(0, 3);

// Renderizar el contenido solo si el proyecto existe
const { Content } = await render(project);

// Obtener colores del tema del proyecto
const themeColors = getProjectThemeColors(project);
const spaceBackgroundColor = project.data.theme?.colors?.background || '#10100E';

// Helper para obtener ícono de categoría
function getCategoryIcon(category: string): string {
  const icons: Record<string, string> = {
    'E-commerce': 'heroicons:shopping-cart',
    'Web Design': 'heroicons:paint-brush',
    'Web App': 'heroicons:device-phone-mobile',
    Branding: 'heroicons:sparkles',
    'Augmented Reality Game': 'heroicons:cube-transparent',
  };
  return icons[category] || 'heroicons:squares-2x2';
}

// Helper para obtener ícono de tecnología
function getTechIcon(tech: string): string {
  const techIcons: Record<string, string> = {
    TypeScript: 'simple-icons:typescript',
    JavaScript: 'simple-icons:javascript',
    React: 'simple-icons:react',
    'Vue.js': 'simple-icons:vuedotjs',
    Vue: 'simple-icons:vuedotjs',
    Astro: 'simple-icons:astro',
    WordPress: 'simple-icons:wordpress',
    'Node.js': 'simple-icons:nodedotjs',
    PHP: 'simple-icons:php',
    Laravel: 'simple-icons:laravel',
    Python: 'simple-icons:python',
    Docker: 'simple-icons:docker',
    MongoDB: 'simple-icons:mongodb',
    PostgreSQL: 'simple-icons:postgresql',
    MySQL: 'simple-icons:mysql',
    Git: 'simple-icons:git',
    GitHub: 'simple-icons:github',
    GitLab: 'simple-icons:gitlab',
    'Tailwind CSS': 'simple-icons:tailwindcss',
    Tailwind: 'simple-icons:tailwindcss',
    Figma: 'simple-icons:figma',
    Adobe: 'simple-icons:adobe',
    Photoshop: 'simple-icons:adobephotoshop',
    Illustrator: 'simple-icons:adobeillustrator',
    Unity: 'simple-icons:unity',
    Flutter: 'simple-icons:flutter',
    Swift: 'simple-icons:swift',
    Kotlin: 'simple-icons:kotlin',
    AWS: 'simple-icons:amazonwebservices',
    Vercel: 'simple-icons:vercel',
    Netlify: 'simple-icons:netlify',
    WooCommerce: 'simple-icons:woocommerce',
    jQuery: 'simple-icons:jquery',
  };
  return techIcons[tech] || 'heroicons:code-bracket';
}

// Helper para obtener color de tecnología
function getTechColor(tech: string): string {
  const techColors: Record<string, string> = {
    TypeScript: '#3178C6',
    JavaScript: '#F7DF1E',
    React: '#61DAFB',
    'Vue.js': '#4FC08D',
    Vue: '#4FC08D',
    Astro: '#FF5D01',
    WordPress: '#21759B',
    'Node.js': '#539E43',
    PHP: '#777BB4',
    Laravel: '#FF2D20',
    Python: '#3776AB',
    Docker: '#2496ED',
    MongoDB: '#47A248',
    PostgreSQL: '#336791',
    MySQL: '#4479A1',
    Git: '#F05032',
    GitHub: '#181717',
    GitLab: '#FCA326',
    'Tailwind CSS': '#38BDF8',
    Tailwind: '#38BDF8',
    Figma: '#F24E1E',
    Adobe: '#FF0000',
    Photoshop: '#31A8FF',
    Illustrator: '#FF9A00',
    Unity: '#000000',
    Flutter: '#02569B',
    Swift: '#FA7343',
    Kotlin: '#7F52FF',
    AWS: '#FF9900',
    Vercel: '#000000',
    Netlify: '#00C7B7',
    WooCommerce: '#964F00',
    jQuery: '#0769AD',
  };
  return techColors[tech] || '#EFBB47';
}

// Helper para obtener colores del tema del proyecto
function getProjectThemeColors(project: any) {
  const defaultColors = {
    primary: '#efbb47',
    secondary: '#3c3c3c',
    surface: '#2d2d2d',
    foreground: '#e1dbcd',
    background: '#10100E',
    border: '#e1dbcd'
  };

  if (project.data.theme?.colors) {
    return {
      primary: project.data.theme.colors.primary || defaultColors.primary,
      secondary: project.data.theme.colors.secondary || defaultColors.secondary,
      surface: project.data.theme.colors.surface || defaultColors.surface,
      foreground: project.data.theme.colors.foreground || defaultColors.foreground,
      background: project.data.theme.colors.background || defaultColors.background,
      border: project.data.theme.colors.border || defaultColors.border,
    };
  }

  return defaultColors;
}
---

<ProjectLayout
  title={`${project.data.title} | Agustín Mouriño`}
  description={project.data.description}
  canonical={`https://www.moura.ar/projects/${project.data.slug}`}
  spaceBackgroundColor={spaceBackgroundColor}
>
  <main class="min-h-screen">
    <!-- Hero Section Modernizado -->
    <section class="relative overflow-hidden pt-4 pb-16 min-h-screen flex items-center">

      <div class="container mx-auto px-4  xl:max-w-7xl w-full">
        <!-- Breadcrumb -->
        <nav class="mb-12" aria-label="Navegación" data-aos="fade-up" data-aos-duration="600">
          <div class="flex items-center gap-2 text-sm text-muted">
            <a href="/" class="hover:text-accent transition-colors">Inicio</a>
            <Icon name="heroicons:chevron-right" class="h-4 w-4" />
            <a href="/projects" class="hover:text-accent transition-colors">Proyectos</a>
            <Icon name="heroicons:chevron-right" class="h-4 w-4" />
            <span class="text-foreground">{project.data.title}</span>
          </div>
        </nav>

        <!-- Layout principal grid asimétrico -->
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-12 items-start project-themed">

          <!-- Columna izquierda - Contenido principal -->
          <div class="lg:col-span-8 space-y-8">

            <!-- Categoría y metadata compacta -->
            <div class="flex flex-wrap items-center gap-4 mb-6" data-aos="fade-up" data-aos-duration="600">
              <div class="inline-flex items-center gap-2 px-4 py-2 border rounded-full text-sm font-medium backdrop-blur-sm project-box">
                <Icon name={getCategoryIcon(project.data.category)} class="h-4 w-4" />
                {project.data.category}
              </div>
              <div class="flex items-center gap-4 text-sm project-tag">
                <div class="flex items-center gap-2">
                  <Icon name="heroicons:calendar-days" class="h-4 w-4 project-tag-icon" />
                  <span>{project.data.date}</span>
                </div>
                <div class="flex items-center gap-2">
                  <Icon name="heroicons:clock" class="h-4 w-4 project-tag-icon" />
                  <span>{project.data.duration}</span>
                </div>
              </div>
            </div>

            <!-- Título principal -->
            <div class="space-y-6">
              <h1
                class="font-serif text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-bold leading-[1.1] pb-4 mb-4t ext-balance project-title"
                data-aos="fade-up"
                data-aos-duration="800"
                data-aos-delay="200"
                set:html={pt(project.data.title)}
              />

              <!-- Descripción -->
              <p
                class="text-lg md:text-xl leading-relaxed max-w-3xl project-description"
                data-aos="fade-up"
                data-aos-duration="800"
                data-aos-delay="600"
              >
                {project.data.description}
              </p>
            </div>

            <!-- Imagen de composición -->
            {project.data.images?.comp && (
              <div
                class="relative group mt-12"
                data-aos="fade-up"
                data-aos-duration="800"
                data-aos-delay="600"
              >
                <div class="relative overflow-hidden rounded-2xl bg-gradient-to-bborder backdrop-blur-sm" style={`background-color: ${themeColors.surface}; border-color: ${themeColors.border};`}>
                  <!-- Efecto glassmorphism sutil -->
                  <div class="absolute inset-0 bg-gradient-to-br from-accent/5 to-transparent"></div>

                  <div class="relative p-3">
                    <Image
                      src={project.data.images.comp.src}
                      alt={project.data.images.comp.alt}
                      class="w-full h-auto rounded-xl shadow-2xl group-hover:scale-[1.02] transition-transform duration-700"
                      width={800}
                      height={450}
                      loading="eager"
                      quality={90}
                    />
                  </div>

                  <!-- Subtle glow effect -->
                  <div class="absolute inset-0 rounded-2xl ring-1 ring-accent/10 group-hover:ring-accent/20 transition-all duration-500"></div>
                </div>
              </div>
            )}

            <!-- CTAs principales -->
            <div
              class="flex flex-col sm:flex-row gap-4 pt-8"
              data-aos="fade-up"
              data-aos-duration="600"
              data-aos-delay="800"
            >
              {project.data.links?.live && (
                <a
                  href={project.data.links.live}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="group inline-flex items-center justify-center gap-3 px-8 py-4 rounded-xl font-semibold text-lg transition-all duration-300 hover:scale-105 active:scale-95 shadow-lg hover:shadow-xl"
                  style={`background: ${themeColors.surface}; color: ${themeColors.foreground};`}
                >
                  <Icon name="heroicons:globe-alt" class="h-6 w-6" />
                  <span>Ver Proyecto Live</span>
                  <Icon
                    name="heroicons:arrow-top-right-on-square"
                    class="h-5 w-5 group-hover:translate-x-1 group-hover:-translate-y-1 transition-transform"
                  />
                </a>
              )}

              {project.data.links?.github && (
                <a
                  href={project.data.links.github}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="group inline-flex items-center justify-center gap-3 border-2 px-8 py-4 rounded-xl font-semibold text-lg transition-all duration-300 backdrop-blur-sm"
                  style={`border-color: ${themeColors.border}; color: ${themeColors.foreground}`}
                >
                  <Icon name="heroicons:code-bracket" class="h-6 w-6" />
                  <span>Ver Código</span>
                  <Icon
                    name="heroicons:arrow-top-right-on-square"
                    class="h-5 w-5 group-hover:translate-x-1 group-hover:-translate-y-1 transition-transform"
                  />
                </a>
              )}
            </div>
          </div>

          <!-- Columna derecha - Información del proyecto -->
          <div class="lg:col-span-4 space-y-8">

            <!-- Colaboraciones - Diseño consistente con mejores prácticas UX/UI -->
            {(project.data.partner || project.data.client) && (
              <div class="group p-6 rounded-2xl border backdrop-blur-sm transition-all duration-300 project-box relative overflow-visible">

                {/* Partner compacto en esquina superior derecha */}
                {project.data.partner && (
                  <div class="absolute -top-2 -right-2 z-10">
                    {/* Badge pequeño de colaboración en la parte superior */}
                    <div class="absolute -top-1 left-1/2 transform -translate-x-1/2 z-20">
                      <div class="group/tag relative">
                        {/* Fondo principal con gradiente */}
                        <div class="absolute inset-0 rounded-full bg-gradient-to-r from-slate-900 to-slate-800 shadow-sm"></div>

                        {/* Border de acento */}
                        <div class="absolute inset-0 rounded-full p-[1px]"
                             style={`background: linear-gradient(135deg, ${themeColors.primary}60, ${themeColors.primary}30)`}>
                          <div class="w-full h-full rounded-full bg-gradient-to-r from-slate-900 to-slate-800"></div>
                        </div>

                        {/* Contenido más compacto */}
                        <div class="relative flex items-center gap-1 px-2 py-0.5 transition-all duration-300 group-hover/tag:scale-105">
                          <div class="flex items-center justify-center w-2 h-2 rounded-full"
                               style={`background: ${themeColors.primary}`}>
                            <Icon name="heroicons:users" class="h-1.5 w-1.5 text-white" />
                          </div>
                          <span class="text-white text-[10px] font-medium tracking-wide whitespace-nowrap">
                            Partner
                          </span>
                        </div>
                      </div>
                    </div>

                    <div class="group/partner backdrop-blur-lg rounded-lg shadow-xl transition-all duration-300 hover:scale-105 border pt-3"
                         style={`background: rgba(from ${themeColors.surface} r g b / 0.9); border-color: ${themeColors.primary}40; box-shadow: 0 6px 24px ${themeColors.primary}20`}>

                    {project.data.partner_logo ? (
                        <div class="relative p-3">
                          {/* Logo principal */}
                      <Image
                        src={project.data.partner_logo}
                        alt={`Logo de ${project.data.partner}`}
                            width={56}
                            height={56}
                            class="h-14 w-14 object-contain filter brightness-110 transition-all duration-300 group-hover/partner:scale-110 partner-logo"
                            quality={100}
                          />
                        </div>
                      ) : (
                        <div class="relative p-3">
                          {/* Contenedor para nombre sin logo */}
                          <div class="flex flex-col items-center justify-center h-14 w-14 rounded-lg"
                               style={`background: ${themeColors.primary}15`}>
                            <Icon name="heroicons:sparkles"
                                  class="h-6 w-6 mb-1 transition-all duration-300 group-hover/partner:scale-110"
                                  style={`color: ${themeColors.primary}`} />
                            <div class="text-xs font-bold leading-none text-center max-w-[50px] truncate"
                                 style={`color: ${themeColors.foreground}EE`}>
                              {project.data.partner.split(' ')[0]}
                            </div>
                          </div>
                        </div>
                      )}
                    </div>
                  </div>
                )}

                {/* Header consistente con otros elementos */}
                <div class="flex items-start gap-4 mb-4">
                  <div class="p-3 rounded-xl project-box-icon">
                    <Icon name="heroicons:users" class="h-6 w-6" />
                  </div>
                  <div>
                    <div class="text-sm mb-2">
                      Cliente Principal
                    </div>
                    <div class="font-semibold text-lg">
                      {project.data.client ? project.data.client : project.data.partner}
                    </div>
                  </div>
                </div>

                {/* Logo del cliente destacado en el centro */}
                {project.data.client && (
                  <div class="flex items-center justify-center py-4 group/logo">
                    <div class="relative p-3 rounded-xl transition-all duration-300 group-hover/logo:scale-105"
                         style={`background: linear-gradient(135deg, ${themeColors.surface}20, ${themeColors.surface}40);`}>

                      {/* Área del logo con dimensiones optimizadas */}
                      <div class="flex items-center justify-center w-50 h-32">
                        {project.data.client_logo ? (
                          <Image
                            src={project.data.client_logo}
                            alt={`Logo de ${project.data.client}`}
                            width={200}
                            height={128}
                            class="max-w-full max-h-full object-contain filter brightness-110 contrast-110 transition-all duration-300"
                            quality={100}
                          />
                        ) : (
                          <div class="text-xl font-bold text-center"
                               style={`color: ${themeColors.foreground}EE`}>
                            {project.data.client}
                          </div>
                        )}
                      </div>

                      {/* Indicador sutil */}
                      <div class="absolute -bottom-1 left-1/2 transform -translate-x-1/2">
                        <div class="h-1 w-12 rounded-full transition-all duration-300 group-hover/logo:w-16"
                             style={`background: linear-gradient(90deg, transparent, ${themeColors.primary}60, transparent)`}></div>
                      </div>
                    </div>
                  </div>
                )}

                {/* Caso especial: Solo partner sin cliente */}
                {!project.data.client && project.data.partner && (
                  <div class="flex items-center justify-center py-4 group/logo">
                    <div class="relative p-3 rounded-xl transition-all duration-300 group-hover/logo:scale-105"
                         style={`background: linear-gradient(135deg, ${themeColors.surface}20, ${themeColors.surface}40); border: 1px solid ${themeColors.border}30`}>

                      {/* Área del logo con dimensiones optimizadas */}
                      <div class="flex items-center justify-center w-48 h-24">
                        {project.data.partner_logo ? (
                          <Image
                            src={project.data.partner_logo}
                            alt={`Logo de ${project.data.partner}`}
                            width={192}
                            height={96}
                            class="max-w-full max-h-full object-contain filter brightness-110 contrast-110 transition-all duration-300"
                            quality={100}
                          />
                        ) : (
                          <div class="text-xl font-bold text-center"
                               style={`color: ${themeColors.foreground}EE`}>
                            {project.data.partner}
                          </div>
                        )}
                      </div>

                      {/* Indicador sutil */}
                      <div class="absolute -bottom-1 left-1/2 transform -translate-x-1/2">
                        <div class="h-1 w-12 rounded-full transition-all duration-300 group-hover/logo:w-16"
                             style={`background: linear-gradient(90deg, transparent, ${themeColors.primary}60, transparent)`}></div>
                      </div>
                    </div>
                  </div>
                )}
              </div>
            )}

            <!-- Mi Rol -->
            <div class="group p-6 rounded-2xl border backdrop-blur-sm  transition-all duration-300 project-box">
              <div class="flex items-start gap-4">
                <div class="p-3 rounded-xl project-box-icon">
                  <Icon name="heroicons:user-circle" class="h-6 w-6" />
                </div>
                <div>
                  <div class="text-sm  mb-2">Mi Rol</div>
                  <div class="font-semibold text-lg">{project.data.role}</div>
                </div>
              </div>
            </div>

            <!-- Tecnologías -->
            {project.data.technologies && project.data.technologies.length > 0 && (
              <div class="group p-6 rounded-2xl border backdrop-blur-sm  transition-all duration-300 project-box">
                <div class="flex items-start gap-4 mb-4">
                  <div class="p-3 rounded-xl project-box-icon">
                    <Icon name="heroicons:cog-6-tooth" class="h-6 w-6" />
                  </div>
                  <div>
                    <div class="text-sm mb-2">Stack Tecnológico</div>
                    <div class="font-semibold  text-lg mb-4">Herramientas Utilizadas</div>
                  </div>
                </div>

                <div class="flex flex-wrap gap-2">
                  {project.data.technologies.map((tech: string) => (
                    <div class="inline-flex items-center gap-2 px-3 py-2  border  rounded-lg transition-all group/tech project-box">
                      <Icon
                        name={getTechIcon(tech)}
                        class="h-4 w-4 group-hover/tech:scale-110 transition-transform"
                        style={`color: ${getTechColor(tech)}`}
                      />
                      <span class="text-sm font-medium">{tech}</span>
                    </div>
                  ))}
                </div>
              </div>
            )}

          </div>
        </div>
      </div>
    </section>

    <!-- Contenido principal centrado -->
    <section class="py-20">
      <div class="container mx-auto px-4 lg:px-8 xl:max-w-7xl">
        <!-- Contenido del caso de estudio -->
        <div
          class="project-content"
          data-aos="fade-up"
          data-aos-duration="800"
          data-aos-delay="400"
        >
          <Content />
        </div>
      </div>
    </section>

    <!-- Proyectos Relacionados -->
    {
      relatedProjects.length > 0 && (
        <section class="border-t border-border/30 py-20 bg-surface/5">
          <div class="container mx-auto px-4 lg:px-8 xl:max-w-7xl">
            <div class="text-center mb-16" data-aos="fade-up" data-aos-duration="800">
              <h2 class="font-serif text-3xl md:text-4xl font-bold mb-4">Proyectos Relacionados</h2>
              <p class="text-lg text-muted max-w-2xl mx-auto">
                Otros trabajos en la categoría {project.data.category}
              </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto">
              {relatedProjects.map((relatedProject, index) => (
                <a
                  href={`/projects/${relatedProject.data.slug}`}
                  class="group relative bg-charcoal rounded-2xl overflow-hidden border border-border hover:border-accent/50 transition-all duration-500 hover:scale-105 shadow-lg hover:shadow-2xl"
                  data-aos="fade-up"
                  data-aos-duration="800"
                  data-aos-delay={index * 200}
                >
                  {relatedProject.data.images?.cover && (
                    <div class="aspect-[16/9] overflow-hidden">
                      <Image
                        src={relatedProject.data.images.cover.src}
                        alt={relatedProject.data.images.cover.alt}
                        class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
                        width={400}
                        height={225}
                        loading="lazy"
                        quality={80}
                      />
                    </div>
                  )}

                  <div class="p-6">
                    <h3 class="font-serif font-bold text-xl mb-3 group-hover:text-accent transition-colors">
                      {relatedProject.data.title}
                    </h3>
                    <p class="text-muted text-sm line-clamp-2 mb-4">
                      {relatedProject.data.description}
                    </p>

                    {relatedProject.data.technologies &&
                      relatedProject.data.technologies.length > 0 && (
                        <div class="flex flex-wrap gap-2">
                          {relatedProject.data.technologies.slice(0, 3).map((tech: string) => (
                            <div class="inline-flex items-center gap-1 px-2 py-1 bg-surface/50 border border-border rounded text-xs">
                              <Icon
                                name={getTechIcon(tech)}
                                class="h-3 w-3"
                                style={`color: ${getTechColor(tech)}`}
                              />
                              <span>{tech}</span>
                            </div>
                          ))}
                          {relatedProject.data.technologies.length > 3 && (
                            <div class="inline-flex items-center px-2 py-1 bg-surface/30 border border-border rounded text-xs text-muted">
                              +{relatedProject.data.technologies.length - 3}
                            </div>
                          )}
                        </div>
                      )}
                  </div>
                </a>
              ))}
            </div>
          </div>
        </section>
      )
    }

    <!-- Call to Action Final -->
    <section class="border-t border-border/30 bg-gradient-to-b from-background to-surface/20 py-20">
      <div class="container mx-auto px-4 lg:px-8 xl:max-w-5xl text-center">
        <div class="max-w-3xl mx-auto space-y-8">
          <h2
            class="font-serif text-3xl md:text-5xl font-bold text-balance"
            data-aos="fade-up"
            data-aos-duration="800"
          >
            ¿Te inspiró este proyecto?
          </h2>

          <p
            class="text-xl md:text-2xl text-muted leading-relaxed"
            data-aos="fade-up"
            data-aos-duration="800"
            data-aos-delay="200"
          >
            Hablemos sobre cómo puedo ayudarte a crear algo excepcional para tu próximo desafío.
          </p>

          <div
            class="flex flex-col sm:flex-row gap-4 justify-center"
            data-aos="fade-up"
            data-aos-duration="600"
            data-aos-delay="400"
          >
            <a
              href="/#contact"
              class="group inline-flex items-center justify-center gap-3 bg-accent text-background px-8 py-4 rounded-xl font-semibold text-lg hover:bg-accent-emphasis transition-all duration-300 hover:scale-105 active:scale-95"
            >
              <span>Iniciar Conversación</span>
              <Icon
                name="heroicons:chat-bubble-left-right"
                class="h-6 w-6 group-hover:scale-110 transition-transform"
              />
            </a>
            <a
              href="/projects"
              class="group inline-flex items-center justify-center gap-3 border-2 border-accent text-foreground px-8 py-4 rounded-xl font-semibold text-lg hover:bg-accent hover:text-background transition-all duration-300"
            >
              <span>Ver Más Proyectos</span>
              <Icon
                name="heroicons:arrow-right"
                class="h-6 w-6 group-hover:translate-x-1 transition-transform"
              />
            </a>
          </div>
        </div>
      </div>
    </section>
  </main>
</ProjectLayout>

<style is:global define:vars={{
  projectPrimary: themeColors.primary,
  projectSecondary: themeColors.secondary,
  projectSurface: themeColors.surface,
  projectForeground: themeColors.foreground,
  projectBackground: themeColors.background,
  projectBorder: themeColors.border,
  projectTitleGradient: project.data.theme?.title_gradient || 'linear-gradient(to right, #121FCF 45%, #CF1512 100%)'
}}>

  /* Estilos personalizados para el contenido del proyecto */

  .project-content .project-section {
    position: relative;
    margin-bottom: 5rem;
    padding-left: 1.5rem;
    padding-right: 1.5rem;
  }

  @media (min-width: 1024px) {
    .project-content .project-section {
      padding-left: 2rem;
      padding-right: 2rem;
    }
  }

  .project-content .project-section::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    width: 4px;
    height: 100%;
    background: linear-gradient(180deg, transparent, var(--projectPrimary), transparent);
    border-radius: 0 2px 2px 0;
    opacity: 0.3;
  }

  .project-content .section-title {
    font-family: var(--font-serif);
    font-size: 1.875rem;
    font-weight: 700;
    margin-bottom: 2rem;
    color: var(--projectPrimary);
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  @media (min-width: 1024px) {
    .project-content .section-title {
      font-size: 2.25rem;
    }
  }

  .project-box{
    background: color-mix(in srgb, var(--projectSurface) 10%, transparent);
    border-color: color-mix(in srgb, var(--projectBorder) 20%, transparent);
    color: var(--projectForeground);
    transition: all 0.3s ease;
  }

  .project-box:hover {
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    border-color: color-mix(in srgb, var(--projectBorder) 40%, transparent);
  }

  .project-box-icon{
    color: var(--projectPrimary);
    background: color-mix(in srgb, var(--projectSurface) 100%, transparent);
    transition: all 0.3s ease;
  }

  .project-box:hover .project-box-icon{
    background: color-mix(in srgb, var(--projectSurface) 40%, transparent);
  }

  .project-title{
    background: var(--projectTitleGradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-fill-color: transparent;
  }

  .project-tag{
    color: var(--projectForeground);
  }

  .project-tag-icon{
    color: var(--projectPrimary);
  }

  /* Efecto glow para los logos de colaboración - mejorado */
  .project-box img {
    filter: brightness(110%) contrast(110%);
    transition: filter 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .project-box:hover img:not(.partner-logo) {
    filter: brightness(110%) contrast(110%) drop-shadow(0 0 16px var(--projectPrimary)) drop-shadow(0 0 32px rgba(from var(--projectPrimary) r g b / 0.4));
  }

  .project-content .section-title .emoji {
    font-size: 2.25rem;
    filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1));
  }

  @media (min-width: 1024px) {
    .project-content .section-title .emoji {
      font-size: 3rem;
    }
  }

  .project-content .project-text {
    line-height: 1.625;
    font-size: 1.2rem;
    color: rgba(225, 219, 205, 0.9);
    margin-bottom: 1.5rem;
    text-wrap: balance;
  }

  .project-content .project-text strong {
    font-weight: 600;
    color: var(--accent);
    font-family: var(--font-mono);
  }

  .project-content .project-text em {
    font-style: italic;
    color: rgba(225, 219, 205, 0.7);
  }

  .project-content .project-quote {
    border-left: 4px solid rgb(from var(--projectPrimary) r g b / 0.5);
    padding-left: 1.5rem;
    margin-top: 2rem;
    margin-bottom: 2rem;
    padding-top: 1rem;
    padding-bottom: 1rem;
    background-color: rgb(from var(--projectSurface) r g b / 0.2);
    border-radius: 0 0.5rem 0.5rem 0;
  }

  .project-content .project-quote p {
    font-size: 1.25rem;
    font-style: italic;
    color: rgb(from var(--projectPrimary) r g b / 0.9);
    font-family: var(--font-serif);
    line-height: 1.625;
    margin-bottom: 0;
  }

  .project-content .section-divider {
    height: 1px;
    background: linear-gradient(90deg, transparent, #3c3c3c, transparent);
    margin-top: 4rem;
    margin-bottom: 4rem;
  }

  .project-content .image-showcase {
    border-radius: 1rem;
    overflow: hidden;
    border: 1px solid rgba(60, 60, 60, 0.5);
    background-color: rgba(60, 60, 60, 0.3);
    padding: 1.5rem;
  }

  .project-content .image-showcase img {
    width: 100%;
    height: auto;
    border-radius: 0.75rem;
    transition: transform 0.5s ease;
  }

  .project-content .image-showcase img:hover {
    transform: scale(1.05);
  }

  .project-content .image-caption {
    margin-top: 1rem;
    text-align: center;
  }

  .project-content .image-caption strong {
    display: block;
    color: #efbb47;
    font-family: var(--font-serif);
    font-size: 1.25rem;
    margin-bottom: 0.5rem;
  }

  .project-content .image-caption p {
    color: rgba(225, 219, 205, 0.7);
    font-size: 0.875rem;
    line-height: 1.625;
  }

  .project-content .compare-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
    margin-bottom: 3rem;
  }

  @media (min-width: 1024px) {
    .project-content .compare-grid {
      grid-template-columns: 1fr 1fr;
    }
  }

  .project-content .featured-single {
    max-width: 64rem;
    margin-left: auto;
    margin-right: auto;
  }

  .project-content .tech-stack-section {
    background-color: rgba(60, 60, 60, 0.1);
    border-radius: 1rem;
    padding: 2rem;
    border: 1px solid rgba(60, 60, 60, 0.3);
  }

  .project-content .tech-category {
    margin-bottom: 2rem;
  }

  .project-content .tech-category h4 {
    font-family: var(--font-serif);
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--accent);
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .project-content .tech-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .project-content .tech-list li {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    color: rgba(225, 219, 205, 0.9);
    padding: 0.5rem 1rem;
    background-color: rgba(16, 16, 14, 0.3);
    border-radius: 0.5rem;
    border: 1px solid rgba(60, 60, 60, 0.2);
    margin-bottom: 0.5rem;
  }

  .project-content .tech-list li::before {
    content: '▸';
    color: var(--project-primary);
    font-family: var(--font-mono);
    font-size: 1.125rem;
  }

  .project-content .status-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background-color: rgba(60, 60, 60, 0.5);
    border: 1px solid #3c3c3c;
    border-radius: 9999px;
    font-size: 0.875rem;
  }

  .project-content .highlight-text {
    color: var(--project-primary);
    font-family: var(--font-mono);
    font-weight: 600;
  }

  /* === NUEVOS ESTILOS PARA PLACEHOLDERS DE IMÁGENES === */
  .image-placeholder-container {
    margin: 2rem 0;
  }

  .image-placeholder {
    position: relative;
    background: linear-gradient(135deg, rgb(from var(--surface) r g b / 0.4), rgb(from var(--surface) r g b / 0.6));
    border: 2px dashed rgb(from var(--project-primary) r g b / 0.3);
    border-radius: 1rem;
    overflow: hidden;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
  }

  .image-placeholder:hover {
    border-color: rgb(from var(--project-primary) r g b / 0.6);
    background: linear-gradient(135deg, rgb(from var(--surface) r g b / 0.6), rgb(from var(--surface) r g b / 0.8));
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
  }

  /* Tamaños de placeholders */
  .image-placeholder.wide {
    aspect-ratio: 2/1;
    min-height: 300px;
  }

  .image-placeholder.medium {
    aspect-ratio: 16/10;
    min-height: 250px;
  }

  .image-placeholder.tall {
    aspect-ratio: 3/4;
    max-height: 500px;
    min-height: 400px;
  }

  .image-placeholder.scrollable-image {
    cursor: pointer;
  }

  /* Contenido del placeholder */
  .placeholder-content {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 2rem;
    color: rgba(225, 219, 205, 0.8);
  }

  .placeholder-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
    opacity: 0.7;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
  }

  .placeholder-text strong {
    display: block;
    font-size: 1.5rem;
    font-weight: 700;
    color: #efbb47;
    margin-bottom: 0.5rem;
    font-family: var(--font-serif);
  }

  .placeholder-text p {
    font-size: 1rem;
    line-height: 1.5;
    margin-bottom: 1rem;
    opacity: 0.8;
  }

  .placeholder-specs {
    display: inline-block;
    font-size: 0.75rem;
    color: rgba(239, 187, 71, 0.7);
    background: rgba(239, 187, 71, 0.1);
    padding: 0.25rem 0.75rem;
    border-radius: 1rem;
    border: 1px solid rgba(239, 187, 71, 0.2);
    font-family: var(--font-mono);
  }

  /* === EFECTO DE SCROLL PARA IMÁGENES LARGAS === */
  .scrollable-image {
    position: relative;
    overflow: hidden;
  }

  .scrollable-image::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      180deg,
      transparent 0%,
      transparent 70%,
      rgba(0, 0, 0, 0.5) 100%
    );
    z-index: 1;
    pointer-events: none;
  }

  .scrollable-image::after {
    content: '⬇️ Scroll vertical';
    position: absolute;
    bottom: 1rem;
    right: 1rem;
    color: rgba(239, 187, 71, 0.8);
    font-size: 0.75rem;
    background: rgba(0, 0, 0, 0.7);
    padding: 0.25rem 0.75rem;
    border-radius: 1rem;
    z-index: 2;
    font-family: var(--font-mono);
    backdrop-filter: blur(5px);
  }

  /* Efecto de scroll suave en hover/click */
  .scrollable-image .placeholder-content {
    animation: verticalFloat 6s ease-in-out infinite;
    transform-origin: center top;
  }

  .scrollable-image:hover .placeholder-content {
    animation: scrollDown 4s ease-in-out infinite;
  }

  .scrollable-image:active .placeholder-content {
    animation: scrollDown 2s ease-in-out infinite;
  }

  @keyframes verticalFloat {
    0%, 100% { transform: translateY(0%); }
    50% { transform: translateY(-10%); }
  }

  @keyframes scrollDown {
    0% { transform: translateY(0%); }
    50% { transform: translateY(-30%); }
    100% { transform: translateY(0%); }
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .image-placeholder {
      min-height: 200px;
    }

    .image-placeholder.tall {
      aspect-ratio: 4/5;
      max-height: 400px;
      min-height: 320px;
    }

    .placeholder-content {
      padding: 1rem;
    }

    .placeholder-icon {
      font-size: 2rem;
    }

    .placeholder-text strong {
      font-size: 1.25rem;
    }

    .placeholder-text p {
      font-size: 0.875rem;
    }
  }

  /* Efecto de carga/pulsing para indicar que es un placeholder */
  .image-placeholder .placeholder-content {
    animation: placeholderPulse 3s ease-in-out infinite;
  }

  @keyframes placeholderPulse {
    0%, 100% { opacity: 0.7; }
    50% { opacity: 1; }
  }

  /* Estados interactivos mejorados */
  .image-placeholder:hover .placeholder-icon {
    transform: scale(1.1);
    transition: transform 0.3s ease;
  }

  .image-placeholder:hover .placeholder-specs {
    background: rgba(239, 187, 71, 0.2);
    border-color: rgba(239, 187, 71, 0.4);
    transition: all 0.3s ease;
  }
</style>
